!function(e){function t(t){for(var n,i,c=t[0],o=t[1],u=t[2],f=0,p=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(l&&l(t);p.length;)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,c=1;c<r.length;c++){var o=r[c];0!==a[o]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;s.push([52,1]),r()}({18:function(e,t,r){},52:function(e,t,r){"use strict";r.r(t);r(18);var n=r(0),a=r.n(n),s=r(16),i=r.n(s),c=r(5),o=r(1),u=r.n(o),l=r(2),f=r.n(l),p=r(3),d=r.n(p),m=r(6),v=r.n(m),y=function(e){var t=e.webmapId,r=e.children,s=a.a.useRef(),i=a.a.useState(null),o=d()(i,2),l=o[0],p=o[1],m=function(){var e=f()(u.a.mark((function e(){var r,n,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/views/MapView","esri/WebMap"]);case 3:r=e.sent,n=d()(r,2),a=n[0],i=n[1],(o=new a({container:s.current,map:new i({portalItem:{id:t}})})).when((function(){p(o)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Object(c.loadCss)(),m()}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:s}),a.a.Children.map(r,(function(e){return a.a.cloneElement(e,{mapView:l})})))};function b(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw s}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.activeTrendData,r=e.features,a=e.visibleScale,s=e.size,i=void 0===s?20:s,o=e.mapView,l=Object(n.useState)(),p=d()(l,2),m=p[0],v=p[1],y=function(){var e=f()(u.a.mark((function e(){var t,r,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/layers/GraphicsLayer"]);case 3:t=e.sent,r=d()(t,1),n=r[0],s=new n({minScale:a&&a.min,maxScale:a&&a.max}),o.map.add(s),v(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=f()(u.a.mark((function e(){var n,a,s,o,l,f,p,v,y,h,S,w,x,g,A,E,C;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/symbols/CIMSymbol","esri/Graphic","esri/geometry/Point"]);case 3:n=e.sent,a=d()(n,3),s=a[0],o=a[1],l=a[2],m.removeAll(),f=b(r);try{for(f.s();!(p=f.n()).done;)v=p.value,y=v.geometry,h=v.pathConfirmed,S=v.pathDeaths,w=v.pathNewCases,g=(x={confirmed:h,death:S,"new-cases":w}[t]).frame,A=x.path,E=new s({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,scaleSymbolsProportionally:!1,respectFrame:!1,size:i,frame:g,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[A]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:1,color:[161,13,34,255]}]}}]}]}}}),C=new o({geometry:new l({latitude:y.y,longitude:y.x}),symbol:E}),m.add(C)}catch(e){f.e(e)}finally{f.f()}e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o&&y()}),[o]),Object(n.useEffect)((function(){m&&r&&h()}),[m,r,t]),null},w=function(e){var t=e.itemId,r=e.outFields,a=e.mapView,s=e.visibleScale,i=e.onSelect,o=Object(n.useState)(),l=d()(o,2),p=l[0],m=l[1],v=function(){var e=f()(u.a.mark((function e(){var r,n,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/layers/FeatureLayer"]);case 3:r=e.sent,n=d()(r,1),a=n[0],i=new a({portalItem:{id:t},minScale:s&&s.min,maxScale:s&&s.max}),m(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=f()(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.scale<p.minScale&&a.scale>p.maxScale)){e.next=5;break}return e.next=3,p.queryFeatures({where:"1=1",geometry:a.toMap(t),returnGeometry:!0,outFields:r||["*"]});case 3:(n=e.sent).features&&n.features.length&&i(n.features[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a&&v()}),[a]),Object(n.useEffect)((function(){p&&a&&a.on("click",(function(e){y(e)}))}),[p]),null},x={"webmap-id":"1bff921ddf7044c3b5ba34e8494a2073","covid19-data-us-states-url":"https://covid19.vannizhang.com/us-states-paths.json","covid19-data-us-counties-url":"https://covid19.vannizhang.com/us-counties-paths.json","us-counties-layer-visible-scale":{min:75e5,max:0},"us-states-layer-visible-scale":{min:73957190,max:7500001}},g="#A10D22",A="#E8E2D2",E="#EFEADB",C=[{label:"WEEKLY CASES",value:"new-cases"},{label:"CASES",value:"confirmed"},{label:"DEATHS",value:"death"}],D=function(e){var t=e.activeTrendData,r=e.trendDataOnChange;return a.a.createElement("div",{style:{position:"absolute",top:"10px",right:"10px",boxShadow:"0 0 10px 2px #B1A483"}},a.a.createElement("div",{style:{backgroundColor:g,color:E,height:"20px",lineHeight:"20px",width:"100%",textAlign:"center"}},a.a.createElement("span",{className:"avenir-bold",style:{fontSize:"0.785rem"}},"CORONAVIRUS TRENDS PER 100,000 PEOPLE, SINCE FEBRUARY, UPDATED DAILY")),a.a.createElement("div",{style:{display:"flex",height:"60px",width:"100%",boxSizing:"border-box",backgroundColor:A}},C.map((function(e){var n=e.value,s=e.label;return a.a.createElement("div",{key:n,style:{width:"150px",height:"100%",color:g,backgroundColor:t===n?E:"transparent",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",borderBottom:"solid 4px ".concat(t===n?g:"transparent"),borderRight:"solid 1px #E0D8C1",cursor:"pointer"},onClick:r.bind(void 0,n)},a.a.createElement("span",{className:"avenir-bold"},s))})),a.a.createElement("div",{style:{width:"60px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},a.a.createElement("svg",{viewBox:"0 0 24 24",height:"24",width:"24",fill:"#B2A584"},a.a.createElement("path",{d:"M12.5 7.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM13 18V9h-2v1h1v8h-1v1h3v-1zm9.8-5.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"}),a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})))))},O=r(17),j=function(){var e=f()(u.a.mark((function e(t){var r,n,a,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.countyFIPS,n=t.stateName,a=r?"".concat("https://services9.arcgis.com/6Hv9AANartyT7fJW/ArcGIS/rest/services/USCounties_cases_V1/FeatureServer/1","/query/?f=json&where=FIPS=").concat(r,"&outFields=dt,Confirmed,Deaths,NewCases"):"".concat("https://services9.arcgis.com/6Hv9AANartyT7fJW/ArcGIS/rest/services/USCounties_cases_V1/FeatureServer/1","/query/?where=ST_Name+%3D+%27").concat(n,"%27&objectIds=&time=&resultType=none&outFields=*&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnDistinctValues=false&cacheHint=false&orderByFields=dt&groupByFieldsForStatistics=ST_Name%2C+dt&outStatistics=%5B%0D%0A++%7B%0D%0A++++%22statisticType%22%3A+%22sum%22%2C%0D%0A++++%22onStatisticField%22%3A+%22Confirmed%22%2C+%0D%0A++++%22outStatisticFieldName%22%3A+%22Confirmed%22%0D%0A++%7D%2C%0D%0A++%7B%0D%0A++++%22statisticType%22%3A+%22sum%22%2C%0D%0A++++%22onStatisticField%22%3A+%22Deaths%22%2C+%0D%0A++++%22outStatisticFieldName%22%3A+%22Deaths%22%0D%0A++%7D%2C%0D%0A++%7B%0D%0A++++%22statisticType%22%3A+%22sum%22%2C%0D%0A++++%22onStatisticField%22%3A+%22NewCases%22%2C%0D%0A++++%22outStatisticFieldName%22%3A+%22NewCases%22%0D%0A++%7D++%0D%0A%5D&having=&resultOffset=&resultRecordCount=&sqlFormat=none&f=pjson&token="),e.prev=2,e.next=5,v.a.get(a);case 5:if(s=e.sent,!(i=s.data)||!i.features){e.next=9;break}return e.abrupt("return",i.features);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),k=O.urlFns.parseQuery().trend,I=function(){var e=Object(n.useState)(k||"new-cases"),t=d()(e,2),r=t[0],s=t[1],i=Object(n.useState)(),c=d()(i,2),o=c[0],l=c[1],p=Object(n.useState)(),m=d()(p,2),b=m[0],h=m[1],g=function(){var e=f()(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get(x["covid19-data-us-counties-url"]);case 3:return t=e.sent,l(t.data),e.next=7,v.a.get(x["covid19-data-us-states-url"]);case 7:r=e.sent,h(r.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){g()}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(y,{webmapId:x["webmap-id"]},a.a.createElement(S,{key:"US-Counties",features:o,activeTrendData:r,size:18,visibleScale:x["us-counties-layer-visible-scale"]}),a.a.createElement(S,{key:"US-States",features:b,activeTrendData:r,size:24,visibleScale:x["us-states-layer-visible-scale"]}),a.a.createElement(w,{key:"query-4-US-Counties",itemId:"7566e0221e5646f99ea249a197116605",outFields:["FIPS"],visibleScale:x["us-counties-layer-visible-scale"],onSelect:function(){var e=f()(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({countyFIPS:t.attributes.FIPS});case 2:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),a.a.createElement(w,{key:"query-4-US-States",itemId:"99fd67933e754a1181cc755146be21ca",outFields:["STATE_NAME"],visibleScale:x["us-states-layer-visible-scale"],onSelect:function(){var e=f()(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({stateName:t.attributes.STATE_NAME});case 2:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),a.a.createElement(D,{activeTrendData:r,trendDataOnChange:s}))};Object(c.setDefaultOptions)({url:"https://js.arcgis.com/next/"}),i.a.render(a.a.createElement(I,null),document.getElementById("root"))}});
//# sourceMappingURL=main.20937d25f41726a44982.js.map