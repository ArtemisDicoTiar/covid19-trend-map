!function(e){function t(t){for(var n,o,c=t[0],s=t[1],l=t[2],d=0,m=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);m.length;)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,c=1;c<a.length;c++){var s=a[c];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={0:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([163,1]),a()}({113:function(e,t,a){},154:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);a(113);var n=a(0),r=a.n(n),i=a(27),o=a.n(i),c=a(10),s=a(7),l=a(64),u=a.n(l),d=a(18),m=a(12),p=a(14),f=Object(d.b)({name:"map",initialState:{tooltipPosition:null,tooltipData:null,isStateLayerVisilbe:!0},reducers:{tooltipPositionChanged:function(e,t){e.tooltipPosition=t.payload},tooltipDataChanged:function(e,t){e.tooltipData=t.payload},isStateLayerVisilbeToggled:function(e,t){e.isStateLayerVisilbe=t.payload}}}),h=f.reducer,b=f.actions,v=b.tooltipPositionChanged,y=b.tooltipDataChanged,g=b.isStateLayerVisilbeToggled,E=Object(p.a)((function(e){return e.map.tooltipPosition}),(function(e){return e})),x=Object(p.a)((function(e){return e.map.tooltipData}),(function(e){return e})),w=Object(p.a)((function(e){return e.map.isStateLayerVisilbe}),(function(e){return e})),O=h,S=a(3),j=a.n(S),C=a(9),k=a.n(C),N={"webmap-id":"1bff921ddf7044c3b5ba34e8494a2073","us-states-feature-layer-item-id":"99fd67933e754a1181cc755146be21ca","us-counties-feature-layer-item-id":"7566e0221e5646f99ea249a197116605","static-files-host":"https://static.vannizhang.com/covid19/","covid19-data-us-states-json":"us-states-paths.json","covid19-data-us-counties-json":"us-counties-paths.json","covid19-latest-numbers-json":"latest-numbers.json","us-counties-layer-visible-scale":{min:95e5,max:0},"us-states-layer-visible-scale":{min:73957190,max:9500001}},A="#A10D22",T="#E8E2D2",M="#EFEADB",F="#B1A483",I="#B2A584",D={Emergent:{values:[212,158,198,255],hex:"#D49EC6"},Spreading:{values:[165,51,110,255],hex:"#A5336E"},Epidemic:{values:[128,11,76,255],hex:"#800B4C"},Controlled:{values:[147,195,195,255],hex:"#93C3C3"},"End Stage":{values:[91,160,168,255],hex:"#5BA0A8"},"Zero Cases":{values:[100,100,100,255],hex:"#c8c8c8"}},P=a(8),z=P.miscFns.isMobileDevice(),U=P.urlFns.parseQuery(),L=!U||!U.trendCategories||"1"===U.trendCategories,R=Object(d.b)({name:"map",initialState:{isMobile:z,activeTrend:"new-cases",isAboutModalOpen:!1,showTrendCategories:L,isNarrowSreen:window.outerWidth<=1020},reducers:{activeTrendUpdated:function(e,t){e.activeTrend=t.payload},isAboutModalOpenToggled:function(e){e.isAboutModalOpen=!e.isAboutModalOpen},showTrendCategoriesToggled:function(e){e.showTrendCategories=!e.showTrendCategories},isNarrowSreenChanged:function(e,t){e.isNarrowSreen=t.payload}}}),V=R.reducer,_=R.actions,W=_.activeTrendUpdated,H=_.isAboutModalOpenToggled,B=_.isNarrowSreenChanged,G=_.showTrendCategoriesToggled,J=Object(p.a)((function(e){return e.UI.activeTrend}),(function(e){return e})),q=Object(p.a)((function(e){return e.UI.isAboutModalOpen}),(function(e){return e})),Y=Object(p.a)((function(e){return e.UI.showTrendCategories}),(function(e){return e})),Q=Object(p.a)((function(e){return e.UI.isMobile}),(function(e){return e})),Z=Object(p.a)((function(e){return e.UI.isNarrowSreen}),(function(e){return e})),K=V,X=Object(m.c)({map:O,UI:K}),$=Object(d.a)({reducer:X,middleware:u()(Object(d.c)())}),ee=a(2),te=a.n(ee),ae=a(20),ne=a.n(ae),re=(a(154),a(37)),ie=function(e){var t=e.ymax4confirmed,a=e.ymax4deaths,i=Object(s.b)(),o=Object(s.c)(q);return Object(n.useEffect)((function(){Object(re.modal)()}),[]),Object(n.useEffect)((function(){o?re.bus.emit("modal:open",{id:"about"}):re.bus.emit("modal:close")}),[o]),r.a.createElement("div",{className:"js-modal modal-overlay about-modal","data-modal":"about"},r.a.createElement("div",{className:"modal-content column-20",role:"dialog","aria-labelledby":"modal"},r.a.createElement("div",{className:"close-btn",onClick:function(){i(H())}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",height:"24",width:"24"},r.a.createElement("path",{d:"M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z"}))),r.a.createElement("div",{className:"block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up"},r.a.createElement("div",{className:"block"},r.a.createElement("h4",{className:"header-red avenir-bold"},"CASES PER CAPITA"),r.a.createElement("p",null,"These trend lines mark the proportion of new cases, per 100,000 population, per week—useful for showing the local fluctuations of case rates throughout the outbreak. When viewing these local rates across the map, comparative national and regional patterns of transmission emerge.")),r.a.createElement("div",{className:"block"},r.a.createElement("h4",{className:"header-red avenir-bold"},"CUMULATIVE CASES"),r.a.createElement("p",null,"These trend lines track the ongoing cumulative number of cases, per 100,000 population, per week. Because it is a cumulative count, the lines will never trend downward, though their rate of increase over time can provide an impression of the local history of the outbreak. An upward-bending line indicates a slow start and rapidly rising outbreak. A generally diagonal line indicates a consistent rate of transmission. An s-shaped line indicates a local “flattening of the curve” associated with a decrease in local cases.")),r.a.createElement("div",{className:"block"},r.a.createElement("h4",{className:"header-red avenir-bold"},"DEATHS"),r.a.createElement("p",null,"These trend lines track the ongoing cumulative number of deaths, per 100,000 population. Interpretations of these lines is consistent with the description of cases. Given the incubation and illness period of the virus, these lines will show a similar pattern to CASES, though with a time lag."))),r.a.createElement("div",null,r.a.createElement("h4",{className:"header-khaki avenir-bold"},"TREND CATEGORY COLORS"),r.a.createElement("p",null,"When the Trend Category option is selected, county trend lines are rendered in a color corresponding to their statistically-determined “",r.a.createElement("a",{href:"https://urbanobservatory.maps.arcgis.com/apps/MapSeries/index.html?appid=ad46e587a9134fcdb43ff54c16f8c39b",target:"_blank"},"trend summary"),"”, created by Charlie Frye. Find the full methodology ",r.a.createElement("a",{href:"https://www.arcgis.com/home/item.html?id=a16bb8b137ba4d8bbe645301b80e5740",target:"_blank"},"here"),".")),r.a.createElement("div",null,r.a.createElement("h4",{className:"header-khaki avenir-bold"},"ABOUT THE Y-AXIS"),r.a.createElement("p",null,"The y-axis of chart lines are consistent so place-to-place comparisons can be visualized, except for outlier counties; Outlier counties are given a scaled y-axis. Specifically, outliers are defined for CASES PER CAPITA as counties with greater than 200 cases per 100,000 population (Trousdale, TN, for ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Trousdale_Turner_Correctional_Center",target:"_blank"},"instance"),"); CUMULATIVE CASES and DEATHS outliers are defined as counties with numbers over two standard deviations from the national mean, which is currently ",P.numberFns.numberWithCommas(t)," and ",a,", respectively. These outlier county chart lines are given a fixed maximum height of 200 pixels.")),r.a.createElement("div",null,r.a.createElement("h4",{className:"header-khaki avenir-bold"},"SOURCES"),r.a.createElement("p",null,"These counts are sourced from the Johns Hopkins University CSSE feature service of daily ",r.a.createElement("a",{target:"_blank",href:"https://services9.arcgis.com/6Hv9AANartyT7fJW/ArcGIS/rest/services"},"US County Cases")," since February 22, 2020, and normalized into population-normalized rates using the population attribute also provided in the JHU service. The Khaki basemap is ",r.a.createElement("a",{target:"_blank",href:"https://livingatlas.arcgis.com/en/browse/#d=2&q=khaki"},"available via Living Atlas"),".")),r.a.createElement("div",null,r.a.createElement("h4",{className:"header-khaki avenir-bold"},"CREATORS"),r.a.createElement("p",null,"This application was created by ",r.a.createElement("a",{target:"_blank",href:"https://github.com/vannizhang/"},"Jinnan Zhang")," and ",r.a.createElement("a",{target:"_blank",href:"https://adventuresinmapping.com/"},"John Nelson"),", of Esri, with help from ",r.a.createElement("a",{target:"_blank",href:"https://github.com/ycabon"},"Yann Cabon")," and Fang Li, inspired by the ",r.a.createElement("a",{target:"_blank",href:"https://datagistips.hypotheses.org/488"},"trend line maps of Mathieu Rajerison")," and the ",r.a.createElement("a",{target:"_blank",href:"https://twitter.com/rileydchampine/status/1243552850728411143"},"local 1918 flu charts of Riley D. Champine"),". We are not medical professionals but saw a need for a visual sense of local rates and trends and created this primarily as a resource for ourselves but are making it available to the public in the event that it is a helpful resource for understanding patterns. We make no claims of officiality and share it only as a reference. For more geographic resources, please visit the ",r.a.createElement("a",{href:"https://www.esri.com/en-us/covid-19/overview",target:"_blank"},"Esri COVID-19 hub.")))))},oe=function(){var e=Object(n.useState)(function(){var e=P.urlFns.parseQuery();if(!e["@"])return null;var t=e["@"].split(",").map((function(e){return+e})),a=te()(t,3);return{lon:a[0],lat:a[1],zoom:a[2]}}()),t=te()(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){if(a){var e=a.lon,t=a.lat,n=a.zoom;P.urlFns.updateQueryParam({key:"@",value:"".concat(e,",").concat(t,",").concat(n)})}}),[a]),{locationFromURL:a,saveLocationInURL:r}},ce=function(e){var t=e.webmapId,a=e.children,i=oe(),o=i.locationFromURL,s=i.saveLocationInURL,l=r.a.useRef(),u=r.a.useState(null),d=te()(u,2),m=d[0],p=d[1],f=function(){var e=k()(j.a.mark((function e(){var a,n,r,i,s,u,d,m,f,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/views/MapView","esri/WebMap"]);case 3:a=e.sent,n=te()(a,2),r=n[0],i=n[1],u=(s=o||{}).lat,d=s.lon,m=s.zoom,f=d&&u?[d,u]:void 0,(h=new r({container:l.current,center:f,zoom:m,map:new i({portalItem:{id:t}})})).when((function(){p(h)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=k()(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/core/watchUtils"]);case 3:t=e.sent,a=te()(t,1),a[0].whenTrue(m,"stationary",(function(){if(-1!==m.zoom){var e={lat:m.center&&m.center.latitude?+m.center.latitude.toFixed(3):0,lon:m.center&&m.center.longitude?+m.center.longitude.toFixed(3):0,zoom:m.zoom};s(e)}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Object(c.loadCss)(),f()}),[]),r.a.useEffect((function(){m&&h()}),[m]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:l}),r.a.Children.map(a,(function(e){return r.a.cloneElement(e,{mapView:m})})))},se=a(65),le=function(e){var t,a=e.position,i=e.data,o=Object(n.useRef)(),c=Object(se.a)(),s=te()(c,2),l=s[0],u=s[1];return i?r.a.createElement("div",{ref:o,style:{position:"absolute",top:function(){if(!a)return-99999;var e=o.current?o.current.offsetHeight:150;return a.y+e>u?a.y-e-10:a.y+10}()+"px",left:function(){if(!a)return-99999;var e=o.current?o.current.offsetWidth:200;return a.x+e>l?a.x-e-10:a.x+10}()+"px",background:M,pointerEvents:"none",boxSizing:"border-box",boxShadow:"0 0 10px 2px ".concat(F),zIndex:5}},r.a.createElement("div",{style:{padding:"5px 15px",backgroundColor:"#E8E2D2",textTransform:"uppercase"}},r.a.createElement("span",{className:"text-theme-color-red avenir-demi font-size--1"},i.locationName)),(t=0===i.confirmed&&i.trendCategory?r.a.createElement("span",null,"Due to state reporting structures, the Johns Hopkins University data service does not fully reflect cases in this county"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},P.numberFns.numberWithCommas(i.population))," population"),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},P.numberFns.numberWithCommas(i.weeklyNewCases))," new cases this week"),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},P.numberFns.numberWithCommas(i.confirmed))," cumulative cases"),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},P.numberFns.numberWithCommas(i.deaths))," deaths"),function(){if(!i||!i.trendCategory)return null;var e=i.trendCategory;return r.a.createElement("div",{className:"trailer-quarter"},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red avenir-demi font-size--1",style:{textTransform:"uppercase",color:D[e].hex}},e)," trend"))}()),r.a.createElement("div",{className:"text-theme-color-khaki avenir-demi font-size--2",style:{padding:"5px 15px 7px",maxWidth:"200px"}},t))):null},ue=function(){var e=Object(s.c)(E),t=Object(s.c)(x);return r.a.createElement(le,{position:e,data:t})},de=a(28),me=a.n(de),pe=a(6),fe=a(29),he=a.n(fe);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(Object(a),!0).forEach((function(t){me()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ye={top:15,right:10,bottom:30,left:30},ge=function(e){var t=e.xDomain,a=e.yDomain,i=e.children,o=he()(),c=Object(n.useRef)(),s=Object(n.useRef)(),l=r.a.useState(),u=te()(l,2),d=u[0],m=u[1],p=r.a.useState(),f=te()(p,2),h=f[0],b=f[1],v=function(){b((function(e){return ve(ve({},e),{},{lastUpdateTime:new Date})}))};return Object(n.useEffect)((function(){!function(){var e=c.current,n=e.offsetWidth-ye.left-ye.right,r=e.offsetHeight-ye.top-ye.bottom;s.current={height:r,width:n},Object(pe.i)(e).append("svg").attr("width","100%").attr("height",r+ye.top+ye.bottom).append("g").attr("transform","translate(".concat(ye.left,", ").concat(ye.top,")"));var i=Object(pe.i)(e).select("svg"),o=i.node(),l=i.select("g").node(),u=Object(pe.f)().paddingInner(.2).range([0,n]).domain(t),d=Object(pe.g)().range([r,0]).domain(a).nice();m({svg:o,g:l,margin:ye,dimension:s.current}),b({x:u,y:d})}()}),[]),Object(n.useEffect)((function(){h&&a&&(h.y.domain(a).nice(),v())}),[a]),r.a.useEffect((function(){!function(){var e=c.current;if(e&&d&&h){var t=h.x,a=e.offsetWidth-ye.left-ye.right;s.current.width=a,t.range([0,a]),v()}}()}),[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:c,style:{position:"relative",width:"100%",height:"100%"}},r.a.Children.map(i,(function(e){return r.a.cloneElement(e,{svgContainerData:d,scales:h})}))))},Ee=Object(pe.j)("%b"),xe=function(e){var t=e.svgContainerData,a=e.scales;return r.a.useEffect((function(){var e,n,r,i,o,c,s,l,u,d,m,p,f;t&&a&&(e=t.dimension,n=t.g,r=e.height,i=e.width,o=Object(pe.i)(n),c=a.x.domain(),s=c[0].split("-").map((function(e){return+e})),l=new Date(s[0],s[1]-1,s[2]),u=c[c.length-1].split("-").map((function(e){return+e})),d=new Date(u[0],u[1]-1,u[2]),m=Object(pe.h)().range([0,i]).domain([l,d]),p=Object(pe.a)(m).tickFormat((function(e){return Ee(e)})),(f=o.selectAll(".x.axis")).size()?f.attr("transform","translate(0,"+r+")").call(p):o.append("g").attr("class","x axis").attr("transform","translate(0,"+r+")").call(p),function(){var e=t.g,n=t.dimension.width,r=a.y,i=Object(pe.i)(e),o=Object(pe.b)(r).ticks(3).tickSizeInner(-n).tickPadding(5).tickFormat((function(e){return P.numberFns.abbreviateNumber(+e,0)})),c=i.selectAll(".y.axis");c.size()?c.call(o):i.append("g").attr("class","y axis").call(o)}())}),[t,a]),null},we=a(22),Oe="bar-rect-group-".concat(Object(we.generate)()),Se="bar-rect-".concat(Object(we.generate)()),je=function(e){var t=e.data,a=e.fillColor,n=e.svgContainerData,i=e.scales,o=r.a.useRef(),c=function(){var e=Object(pe.i)(o.current).selectAll(".".concat(Oe));e.size()&&e.remove()};return r.a.useEffect((function(){var e;n&&(e=n.g,o.current=Object(pe.i)(e).append("g").node())}),[n]),r.a.useEffect((function(){var e,r,s;n&&i&&t&&(e=n.dimension.height,r=i.x,s=i.y,c(),Object(pe.i)(o.current).append("g").attr("class",Oe).selectAll(".".concat(Se)).data(t).enter().append("rect").attr("class",Se).style("fill",a).attr("x",(function(e){return r(e.x)})).attr("width",r.bandwidth()).attr("y",(function(e){return s(e.y)})).attr("height",(function(t){return e-s(t.y)})))}),[i,t]),null},Ce="line-".concat(Object(we.generate)()),ke=function(e){var t=e.data,a=e.strokeColor,n=e.svgContainerData,i=e.scales,o=r.a.useRef(),c=function(){var e=Object(pe.i)(o.current).selectAll(".".concat(Ce));e.size()&&e.remove().exit()};return r.a.useEffect((function(){var e;n&&(e=n.g,o.current=Object(pe.i)(e).append("g").node())}),[n]),r.a.useEffect((function(){var e,r,s,l,u;n&&i&&t&&(e=Object(pe.i)(o.current),r=i.x,s=i.y,l=r.bandwidth()/2,u=Object(pe.c)().x((function(e){return r(e.x)+l})).y((function(e){return s(e.y)})),c(),e.append("path").data([t]).attr("class",Ce).attr("d",u).style("fill","none").style("stroke",a).style("stroke-width",2))}),[i,t]),null},Ne=function(e){var t=e.data,a=e.svgContainerData,i=e.scales,o=e.onHover,c=r.a.useRef(),s=r.a.useRef(),l=function(e){s.current=e,u(),o(e)},u=function(){var e=i.x,t=s.current,a=Object(pe.i)(c.current).select(".".concat("vertical-ref-line")),n=t?e(t.attributes.dt)+e.bandwidth()/2:0,r=t?1:0;a.attr("x1",n).attr("x2",n).style("opacity",r)},d=function(e){for(var a=-1,n=i.x,r=0,o=t.length;r<o;r++){var c=n(t[r].attributes.dt),s=t[r+1]?r+1:r,l=n(t[s].attributes.dt);if(e>=c&&e<=l){a=Math.abs(e-c)<Math.abs(e-l)?r:s;break}}return t[a]};return Object(n.useEffect)((function(){a&&t.length&&function(){var e=a.g,t=a.dimension,n=t.height,r=t.width;c.current=Object(pe.i)(e).append("g").node();var i=Object(pe.i)(c.current);i.append("line").attr("class","vertical-ref-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",n).style("opacity",0).attr("stroke-width",.5).attr("stroke","rgba(255,255,255,.75)").style("fill","none"),i.append("rect").attr("width",r).attr("height",n).attr("fill","rgba(0,0,0,0)").on("mouseleave",(function(){l(null)})).on("mousemove",(function(){var e=Object(pe.e)(this)[0];l(d(e))}))}()}),[a,t]),Object(n.useEffect)((function(){if(a&&i){var e=a.dimension.width;Object(pe.i)(c.current).select("rect").attr("width",e)}}),[i]),null},Ae=function(e){var t,a,i,o,c,s,l,u,d,m,p=e.svgContainerData,f=e.scales,h=e.data,b=r.a.useRef(),v=r.a.useState({top:0,left:0}),y=te()(v,2),g=y[0],E=y[1];return Object(n.useEffect)((function(){!function(){var e=b.current;if(e){var t=p.dimension,a=p.margin,n=t.width,r=f.x,i=(f.y,e.offsetWidth),o=-(e.offsetHeight-a.top),c=r(h.attributes.dt)+a.left,s=c+i/2>=n+a.left?c-i:c-i/2;s=s>=a.left?s:a.left,E({top:o,left:s})}}()}),[h]),h?(t=g.top,a=g.left,i=h.attributes,o=i.dt,c=i.Confirmed,s=i.Deaths,l=i.NewCases,i.Population,u=P.numberFns.numberWithCommas(l),d=P.numberFns.numberWithCommas(c),m=P.numberFns.numberWithCommas(s),r.a.createElement("div",{ref:b,style:{position:"absolute",left:"".concat(a,"px"),top:"".concat(t,"px"),padding:"7px 10px",background:M,color:"#fff",pointerEvents:"none",boxSizing:"border-box",boxShadow:"0 0 10px 2px ".concat(F)}},r.a.createElement("div",{className:"font-size--3 avenir-demi"},r.a.createElement("span",{className:"text-theme-color-khaki"},o)),r.a.createElement("div",{className:"font-size--2 avenir-bold"},r.a.createElement("div",null,r.a.createElement("span",{className:"text-theme-color-khaki"},"new cases: ",r.a.createElement("span",{className:"text-theme-color-red"},u))),r.a.createElement("div",null,r.a.createElement("span",{className:"text-theme-color-khaki"},"cumulative cases: ",r.a.createElement("span",{className:"text-theme-color-red"},d))),r.a.createElement("div",null,r.a.createElement("span",{className:"text-theme-color-khaki"},"cumulative deaths: ",r.a.createElement("span",{className:"text-theme-color-red"},m)))))):null},Te={confirmed:"CUMULATIVE CASES",death:"CUMULATIVE DEATHS","new-cases":"WEEKLY AVERAGE"},Me=function(e){var t=e.chartType;return r.a.createElement("div",{className:"text-theme-color-red avenir-demi",style:{position:"absolute",top:"13px",left:"".concat(ye.left+5,"px"),fontSize:".8rem"}},"confirmed"===t||"death"===t?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,Te[t]),r.a.createElement("br",null),r.a.createElement("span",null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-theme-color-khaki"},"NEW DAILY CASES"),r.a.createElement("br",null),r.a.createElement("span",null,Te["new-cases"])))},Fe={"new-cases":"NewCases",death:"Deaths",confirmed:"Confirmed"},Ie=function(e){var t=e.data,a=Object(s.c)(J),i=Object(s.c)(Q),o=Object(s.c)(Z),c=Object(n.useState)(!1),l=te()(c,2),u=l[0],d=(l[1],Object(n.useState)()),m=te()(d,2),p=m[0],f=m[1],h=function(e){var a=t.map((function(t){return u?Math.round(t.attributes[e]/t.attributes.Population*1e5):t.attributes[e]}));return[0,Object(pe.d)(a)||1]},b=function(e,a){if(!t||!t.length)return[];if(!a)return t.map((function(t){var a=u?Math.round(t.attributes[e]/t.attributes.Population*1e5):t.attributes[e];return{x:t.attributes.dt,y:a}}));for(var n=[],r=t.length-1;r>0;r--){var i=t[r],o=i.attributes.dt,c=0,s=r-6>=0?r-6:0,l=r+1,d=t.slice(s,l);d.forEach((function(t){return c+=t.attributes[e]}));var m=c/d.length;u&&(m=m/i.attributes.Population*1e5),m=(m=Math.round(m))<0?0:m,n.push({x:o,y:m})}return n},v=function(e){if(!t||!t.length)return null;if((i||o)&&!(e===a))return null;var n=Fe[e],c="new-cases"===e;return r.a.createElement(ge,{key:e,xDomain:t.map((function(e){return e.attributes.dt})),yDomain:h(n)},r.a.createElement(xe,null),r.a.createElement(Me,{chartType:e}),"new-cases"===e?r.a.createElement(je,{fillColor:I,data:b(n)}):r.a.createElement(r.a.Fragment,null),r.a.createElement(ke,{strokeColor:A,data:b(n,c)}),p&&p.parentChart===e?r.a.createElement(Ae,{data:p.data}):r.a.createElement(r.a.Fragment,null),r.a.createElement(Ne,{data:t,onHover:function(t){t||f(void 0),f({data:t,parentChart:e})}}))};return r.a.createElement("div",{style:{width:"100%",height:"170px",backgroundColor:M,display:"flex",boxSizing:"border-box",padding:"0 1rem"}},v("new-cases"),v("confirmed"),v("death"))},De=function(e){var t=e.showLoadingIndicator,a=e.children;return r.a.createElement("div",{style:{position:"absolute",left:"15px",right:"15px",bottom:"25px",boxSizing:"border-box",boxShadow:"0 0 10px 2px ".concat(F),backgroundColor:M}},t?r.a.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"225px"}},r.a.createElement("div",{className:"loader is-active"},r.a.createElement("div",{className:"loader-bars"}))):a)},Pe=[{label:"CASE PER CAPITA",value:"new-cases"},{label:"CUMULATIVE CASES",value:"confirmed"},{label:"DEATHS",value:"death"}],ze=function(){var e=Object(s.b)(),t=Object(s.c)(J),a=Object(s.c)(Q);return r.a.createElement("div",{style:{position:"absolute",top:"10px",right:"10px",left:a?"10px":"unset",boxShadow:"0 0 10px 2px #B1A483"}},r.a.createElement("div",{style:{backgroundColor:A,color:M,lineHeight:"20px",width:"100%",textAlign:"center"}},r.a.createElement("span",{className:"avenir-bold",style:{fontSize:"12px"}},"COVID-PULSE - UNITED STATES NOVEL CORONAVIRUS TREND LINES, SINCE FEBRUARY")),r.a.createElement("div",{style:{display:"flex",height:"60px",width:"100%",boxSizing:"border-box",backgroundColor:T}},Pe.map((function(n){var i=n.value,o=n.label;return r.a.createElement("div",{key:i,style:{width:a?"auto":"160px",flexGrow:a?1:0,height:"100%",color:A,backgroundColor:t===i?M:"transparent",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",borderBottom:"solid 4px ".concat(t===i?A:"transparent"),borderRight:"solid 1px #E0D8C1",cursor:"pointer"},onClick:function(){e(W(i))}},r.a.createElement("span",{className:"avenir-bold",style:{fontSize:"12px"}},o))})),r.a.createElement("div",{style:{width:"60px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:function(){e(H())}},r.a.createElement("svg",{viewBox:"0 0 24 24",height:"24",width:"24",fill:I},r.a.createElement("path",{d:"M12.5 7.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM13 18V9h-2v1h1v8h-1v1h3v-1zm9.8-5.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})))))},Ue=function(e){var t=e.itemId,a=e.outFields,r=e.mapView,i=e.visibleScale,o=e.onStart,s=e.onSelect,l=e.pointerOnMove,u=e.featureOnHover,d=Object(n.useRef)(),m=Object(n.useRef)(),p=Object(n.useRef)(),f=function(){return r.scale<d.current.minScale&&r.scale>d.current.maxScale},h=function(){var e=k()(j.a.mark((function e(){var n,o,s,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/layers/FeatureLayer"]);case 3:n=e.sent,o=te()(n,1),s=o[0],l=new s({portalItem:{id:t},minScale:i&&i.min,maxScale:i&&i.max,visible:!0,popupEnabled:!1,outFields:a,opacity:0}),r.map.add(l),r.whenLayerView(l).then((function(e){d.current=l,m.current=e,v()})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=k()(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f()){e.next=7;break}return o(),e.next=5,m.current.queryFeatures({where:"1=1",geometry:r.toMap(t),returnGeometry:!0,outFields:a||["*"]});case 5:n=e.sent,s(n.features&&n.features.length?n.features[0]:void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){r.on("click",(function(e){b(e)})),r.on("pointer-leave",(function(){l(void 0)})),r.on("pointer-move",(function(e){if(clearTimeout(p.current),f()){var t=e.x,n=e.y;l({x:t,y:n}),p.current=window.setTimeout(k()(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.current.queryFeatures({where:"1=1",geometry:r.toMap(e),returnGeometry:!1,outFields:a||["*"]});case 2:n=t.sent,u(n.features[0]);case 4:case"end":return t.stop()}}),t)}))),50)}}))};return Object(n.useEffect)((function(){r&&h()}),[r]),null},Le=a(166),Re=a(165),Ve=a(167);function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){me()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var He=function(e){var t=e.locationName,a=e.data,n=e.closeBtnOnClick,i=Object(s.c)(Q);return r.a.createElement("div",{style:{position:"relative",width:"100%",padding:".4rem 1.35rem",display:i?"block":"flex",alignItems:"center",boxSizing:"border-box",backgroundColor:T}},r.a.createElement("div",{style:{color:A,textTransform:"uppercase",maxWidth:i?"320px":"auto"}},r.a.createElement("span",{className:"avenir-bold font-size-2"},t)),r.a.createElement("div",{style:{flexGrow:1}},function(){if(!a||!a.length)return null;var e=a.length-1,t=a[e].attributes,n=t.dt,o=t.Confirmed,c=t.Deaths,s=t.Population,l=n.split("-"),u=te()(l,3),d=u[0],m=u[1],p=u[2],f=new Date(+d,+m-1,+p).getDay(),h=0===f?a[e-6]:a[e-f],b=P.numberFns.numberWithCommas(o),v=P.numberFns.numberWithCommas(c),y=P.numberFns.numberWithCommas(o-h.attributes.Confirmed),g=P.numberFns.numberWithCommas(c-h.attributes.Deaths),E=P.numberFns.numberWithCommas(s),x={padding:i?"0":"0 .65rem",borderRight:i?"none":"solid 1px rgba(178, 165, 132, .5)",display:i?"block":"flex",alignItems:"center"};return r.a.createElement("div",{className:"font-size--2 avenir-bold text-theme-color-khaki",style:{display:i?"block":"flex",alignItems:"strech",padding:"0 ".concat(i?"0":"1rem")}},r.a.createElement("div",{style:We(We({},x),{},{display:"block"})},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},"Biggest Weekly Jump")," ",i?null:r.a.createElement("br",null)," ",function(){for(var e=a[0],t=Number.NEGATIVE_INFINITY,n=Object(Le.a)(a[0].attributes.dt,"yyyy-MM-dd",new Date),r=Object(Re.a)(n),i=0,o=a.length;i<o;i++){var c=i%7+r;if(1===(c=c>7?c-7:c)){var s=a[i].attributes.Confirmed-(i-6>=0?a[i-6]:a[0]).attributes.Confirmed;s>t&&(t=s,e=a[i])}}var l=Object(Le.a)(e.attributes.dt,"yyyy-MM-dd",new Date);return Object(Ve.a)(l,"MMMM dd, yyyy")}())),r.a.createElement("div",{style:x},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},"Population")," ",E)),r.a.createElement("div",{style:x},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},y)," new cases and ",r.a.createElement("span",{className:"text-theme-color-red"},g)," deaths this week")),r.a.createElement("div",{style:We(We({},x),{},{borderRight:"none"})},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},b)," cumulative cases and ",r.a.createElement("span",{className:"text-theme-color-red"},v)," deaths")))}()),r.a.createElement("div",{style:We({cursor:"pointer"},i?{position:"absolute",top:".5rem",right:".5rem"}:null),onClick:n},r.a.createElement("svg",{viewBox:"0 0 32 32",height:"32",width:"32",fill:I},r.a.createElement("path",{d:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"}),r.a.createElement("path",{fill:"none",d:"M0 0h32v32H0z"}))))},Be=function(e){var t=e.features,a=e.visibleScale,r=e.size,i=void 0===r?20:r,o=e.hasTrendCategoriesAttribute,l=void 0!==o&&o,u=e.mapView,d=e.isLayerInVisibleScaleOnChange,m=Object(s.c)(J),p=Object(s.c)(Y),f=Object(n.useState)(),h=te()(f,2),b=h[0],v=h[1],y=Object(n.useState)(!1),g=te()(y,2),E=g[0],x=g[1],w=function(){var e=k()(j.a.mark((function e(){var t,n,r,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/layers/GraphicsLayer","esri/core/watchUtils"]);case 3:t=e.sent,n=te()(t,2),r=n[0],i=n[1],o=new r({minScale:a&&a.min,maxScale:a&&a.max}),u.map.add(o),v(o),i.whenTrue(u,"stationary",(function(){var e=u.scale<a.min&&u.scale>a.max;x(e)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=k()(j.a.mark((function e(t){var a,n,r,o,s,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/symbols/CIMSymbol","esri/Graphic","esri/geometry/Point"]);case 3:a=e.sent,n=te()(a,3),r=n[0],o=n[1],s=n[2],u=t.map((function(e){var t=e.attributes,a=e.geometry,n={confirmed:e.confirmed,death:e.deaths,"new-cases":e.newCases}[m],c=n.frame,u=n.path,d=[161,13,34,255];p&&l&&(d=t&&t.trendType?D[t.trendType].values:[200,200,200,255]);var f=new r({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",enable:!0,scaleSymbolsProportionally:!1,respectFrame:!0,size:i,frame:c,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[u]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:1,color:d}]}}]}]}}});return new o({geometry:new s({latitude:a.y,longitude:a.x}),symbol:f})})),b.addMany(u),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u&&w()}),[u]),Object(n.useEffect)((function(){b&&t&&(b.removeAll(),E&&O(t))}),[b,t,m,p]),Object(n.useEffect)((function(){t&&E&&!b.graphics.length&&O(t),d&&d(E)}),[E]),null},Ge=function(e){var t=e.queryResult,a=e.mapView,r=Object(n.useState)(),i=te()(r,2),o=i[0],s=i[1],l=function(){var e=k()(j.a.mark((function e(){var t,n,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.loadModules)(["esri/layers/GraphicsLayer"]);case 3:t=e.sent,n=te()(t,1),r=n[0],i=new r,a.map.add(i),s(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=k()(j.a.mark((function e(){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.loadModules)(["esri/symbols/SimpleFillSymbol"]);case 2:a=e.sent,n=te()(a,1),r=n[0],t.symbol=new r({color:[0,0,0,0],outline:{color:"rgba(178,165,132,.7)",width:1}}),o.add(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a&&l()}),[a]),Object(n.useEffect)((function(){o&&(o.removeAll(),t&&u())}),[t]),null},Je=[{value:"Emergent",tooltip:"Early stages of outbreak",color:"#D49EC6"},{value:"Spreading",tooltip:"Early stages, and, depending on an administrative area’s capacity, a manageable rate of spread",color:"#A5336E"},{value:"Epidemic",tooltip:"Uncontrolled spread",color:"#800B4C"},{value:"Controlled",tooltip:"Very low levels of new cases",color:"#93C3C3"},{value:"End Stage",tooltip:"No New cases",color:"#5BA0A8"},{value:"Zero Cases",tooltip:"",color:"#c8c8c8",label:"No Cases"}],qe=function(){var e,t=Object(s.b)(),a=Object(s.c)(w),n=Object(s.c)(Y),i=Object(s.c)(Q);return r.a.createElement("div",{style:{position:"absolute",top:i?"120px":"110px",right:"10px",height:"22px",display:"flex",fontSize:"12px",lineHeight:"22px"}},(e=n?r.a.createElement("svg",{viewBox:"0 0 24 24",height:"24",width:"24",style:{fill:I}},r.a.createElement("path",{d:"M3 4.281v16.437A1.282 1.282 0 0 0 4.281 22h16.437A1.282 1.282 0 0 0 22 20.718V4.281A1.281 1.281 0 0 0 20.719 3H4.28A1.281 1.281 0 0 0 3 4.281zM20.719 4a.281.281 0 0 1 .281.281V20.72a.281.281 0 0 1-.281.281H4.28a.281.281 0 0 1-.28-.282V4.28A.281.281 0 0 1 4.281 4zM10.5 17L7 13.689l.637-.636 2.863 2.674 7.022-6.87.637.637z"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})):r.a.createElement("svg",{viewBox:"0 0 24 24",height:"24",width:"24",style:{fill:I}},r.a.createElement("path",{d:"M3 4.281v16.437A1.282 1.282 0 0 0 4.281 22h16.437A1.282 1.282 0 0 0 22 20.718V4.281A1.281 1.281 0 0 0 20.719 3H4.28A1.281 1.281 0 0 0 3 4.281zM20.719 4a.281.281 0 0 1 .281.281V20.72a.281.281 0 0 1-.281.281H4.28a.281.281 0 0 1-.28-.282V4.28A.281.281 0 0 1 4.281 4z"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),r.a.createElement("div",{style:{display:"flex",alignItems:"center",backgroundColor:M,cursor:"pointer"},onClick:function(){t(function(){var e=k()(j.a.mark((function e(t,a){var n,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a(),r=n.UI.showTrendCategories,i=!r,t(G()),P.urlFns.updateQueryParam({key:"trendCategories",value:i?"1":"0"});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}},e)),n?function(){if(n&&a)return r.a.createElement("div",{style:{backgroundColor:M,color:I,width:i?"auto":"540px",boxSizing:"border-box",border:"1px solid ".concat(T),padding:"0 .25rem"}},r.a.createElement("span",{className:"avenir-demi"},"Trend categories are available at the county level. Please zoom in."));var e=Je.map((function(e){return r.a.createElement("div",{key:e.value,style:{display:"felx",alignItems:"center",backgroundColor:D[e.value].hex,width:"90px",color:"#fff",textAlign:"center",textTransform:"uppercase"},title:e.tooltip},r.a.createElement("span",{className:"avenir-demi"},e.label||e.value))}));return r.a.createElement("div",{style:{display:"flex",flexWrap:i?"wrap":"nowrap"}},e)}():r.a.createElement("div",{style:{color:"#fff",backgroundColor:A,padding:"0 .35rem",display:"felx",alignItems:"center",height:"100%"}},r.a.createElement("span",{className:"avenir-demi"},"SHOW TREND CATEGORIES")))},Ye={},Qe=function(){var e=k()(j.a.mark((function e(t){var a,n,r,i,o,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.countyFIPS,n=t.stateName,!Ye[r=a||n]){e.next=4;break}return e.abrupt("return",Ye[r]);case 4:return i="".concat("https://services9.arcgis.com/6Hv9AANartyT7fJW/ArcGIS/rest/services/USCounties_cases_V1/FeatureServer/1","/query"),o=a?{f:"json",where:"FIPS='".concat(a,"'"),outFields:"dt,Confirmed,Deaths,NewCases,Population",orderByFields:"dt"}:{f:"json",where:"ST_Name='".concat(n,"'"),outFields:"*",orderByFields:"dt",groupByFieldsForStatistics:"ST_Name,dt",outStatistics:JSON.stringify([{statisticType:"sum",onStatisticField:"Confirmed",outStatisticFieldName:"Confirmed"},{statisticType:"sum",onStatisticField:"Deaths",outStatisticFieldName:"Deaths"},{statisticType:"sum",onStatisticField:"NewCases",outStatisticFieldName:"NewCases"},{statisticType:"sum",onStatisticField:"Population",outStatisticFieldName:"Population"}])},e.prev=6,e.next=9,ne.a.get(i,{params:new URLSearchParams(o)});case 9:if(c=e.sent,!(s=c.data)||!s.features){e.next=14;break}return Ye[r]=s.features,e.abrupt("return",s.features);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}(),Ze=function(e){var t=e.covid19USCountiesData,a=e.covid19USStatesData,i=e.covid19LatestNumbers,o=Object(s.b)(),c=he()(),l=Object(n.useState)(),u=te()(l,2),d=u[0],m=u[1],p=Object(n.useState)(),f=te()(p,2),h=f[0],b=f[1],E=Object(n.useState)(!1),x=te()(E,2),w=x[0],O=x[1],S=function(){var e=k()(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return T(),e.abrupt("return",!1);case 3:return b({graphic:t,locationName:"".concat(t.attributes.NAME,", ").concat(t.attributes.STATE_NAME)}),e.next=6,Qe({countyFIPS:t.attributes.FIPS});case 6:a=e.sent,m(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=k()(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return T(),e.abrupt("return",!1);case 3:return a=t.attributes.STATE_NAME,b({graphic:t,locationName:t.attributes.STATE_NAME}),e.next=7,Qe({stateName:a});case 7:n=e.sent,m(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){m(void 0),O(!0)},T=function(){O(!1),m(void 0),b(void 0)},M=function(e,t){var a;if(e&&t){var n=i[t];a={locationName:e,confirmed:n.Confirmed,deaths:n.Deaths,weeklyNewCases:n.NewCases,population:n.Population,trendCategory:n.TrendType}}o(y(a))};return Object(n.useEffect)((function(){d&&O(!1)}),[d]),r.a.useEffect((function(){var e;o((e=c.outerWidth,function(){var t=k()(j.a.mark((function t(a,n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(B(e<=1020));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()))}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{webmapId:N["webmap-id"]},r.a.createElement(Ge,{queryResult:h?h.graphic:void 0}),r.a.createElement(Be,{key:"US-Counties",features:t,size:60,hasTrendCategoriesAttribute:!0,visibleScale:N["us-counties-layer-visible-scale"]}),r.a.createElement(Be,{key:"US-States",features:a,size:60,visibleScale:N["us-states-layer-visible-scale"],isLayerInVisibleScaleOnChange:function(e){o(g(e)),o(y(void 0))}}),r.a.createElement(Ue,{key:"query-4-US-Counties",itemId:N["us-counties-feature-layer-item-id"],outFields:["FIPS","NAME","STATE_NAME"],visibleScale:N["us-counties-layer-visible-scale"],onStart:A,onSelect:S,pointerOnMove:function(e){o(v(e))},featureOnHover:function(e){var t=e?"".concat(e.attributes.NAME,", ").concat(e.attributes.STATE_NAME):void 0,a=e?e.attributes.FIPS:void 0;M(t,a)}}),r.a.createElement(Ue,{key:"query-4-US-States",itemId:N["us-states-feature-layer-item-id"],outFields:["STATE_NAME","STATE_FIPS"],visibleScale:N["us-states-layer-visible-scale"],onStart:A,onSelect:C,pointerOnMove:function(e){o(v(e))},featureOnHover:function(e){var t=e?"".concat(e.attributes.STATE_NAME):void 0,a=e?e.attributes.STATE_FIPS:void 0;M(t,a)}})),r.a.createElement(ze,null),r.a.createElement(qe,null),d||w?r.a.createElement(De,{showLoadingIndicator:w},r.a.createElement(He,{locationName:h?h.locationName:void 0,data:d,closeBtnOnClick:T}),r.a.createElement(Ie,{data:d})):null,r.a.createElement(ue,null),r.a.createElement(ie,{ymax4confirmed:a[0].confirmed.frame.ymax,ymax4deaths:a[0].deaths.frame.ymax}))},Ke=function(){var e=Object(n.useState)(),t=te()(e,2),a=t[0],i=t[1],o=Object(n.useState)(),c=te()(o,2),s=c[0],l=c[1],u=Object(n.useState)(),d=te()(u,2),m=d[0],p=d[1],f=function(){var e=k()(j.a.mark((function e(){var t,a,n,r,o,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(t=N["static-files-host"])+N["covid19-data-us-counties-json"],n=t+N["covid19-data-us-states-json"],r=t+N["covid19-latest-numbers-json"],e.next=7,ne.a.get(n);case 7:return o=e.sent,l(o.data),e.next=11,ne.a.get(a);case 11:return c=e.sent,i(c.data),e.next=15,ne.a.get(r);case 15:s=e.sent,p(s.data),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[]),a&&s&&m?r.a.createElement(Ze,{covid19USCountiesData:a,covid19USStatesData:s,covid19LatestNumbers:m}):null};Object(c.setDefaultOptions)({url:"https://js.arcgis.com/next/"}),o.a.render(r.a.createElement(s.a,{store:$},r.a.createElement(Ke,null)),document.getElementById("root"))}});
//# sourceMappingURL=main.6496c056e27b990f0dd7.js.map