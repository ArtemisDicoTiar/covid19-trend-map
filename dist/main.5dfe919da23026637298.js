!function(e){function t(t){for(var n,c,o=t[0],s=t[1],l=t[2],f=0,d=[];f<o.length;f++)c=o[f],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&d.push(r[c][0]),r[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);d.length;)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var s=a[o];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={0:0},i=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=s;i.push([142,1]),a()}({100:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);a(100);var n=a(0),r=a.n(n),i=a(51),c=a.n(i),o=a(9),s=a(5),l=a.n(s),u=a(7),f=a.n(u),d=a(2),m=a.n(d),p=a(17),b=a.n(p),v=function(e){var t=e.webmapId,a=e.initialMapCenterLocation,i=e.onStationary,c=e.children,s=r.a.useRef(),u=r.a.useState(null),d=m()(u,2),p=d[0],b=d[1],v=function(){var e=f()(l.a.mark((function e(){var n,r,i,c,u,f,d,p,v,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/views/MapView","esri/WebMap"]);case 3:n=e.sent,r=m()(n,2),i=r[0],c=r[1],f=(u=a||{}).lat,d=u.lon,p=u.zoom,v=d&&f?[d,f]:void 0,(h=new i({container:s.current,center:v,zoom:p,map:new c({portalItem:{id:t}})})).when((function(){b(h)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=f()(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/core/watchUtils"]);case 3:t=e.sent,a=m()(t,1),a[0].whenTrue(p,"stationary",(function(){if(-1!==p.zoom){var e={lat:p.center&&p.center.latitude?+p.center.latitude.toFixed(3):0,lon:p.center&&p.center.longitude?+p.center.longitude.toFixed(3):0,zoom:p.zoom};i(e)}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Object(o.loadCss)(),v()}),[]),r.a.useEffect((function(){p&&h()}),[p]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:s}),r.a.Children.map(c,(function(e){return r.a.cloneElement(e,{mapView:p})})))},h=function(e){var t=e.activeTrend,a=e.features,r=e.visibleScale,i=e.size,c=void 0===i?20:i,s=e.mapView,u=Object(n.useState)(),d=m()(u,2),p=d[0],b=d[1],v=Object(n.useState)(!1),h=m()(v,2),y=h[0],g=h[1],x=function(){var e=f()(l.a.mark((function e(){var t,a,n,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/layers/GraphicsLayer","esri/core/watchUtils"]);case 3:t=e.sent,a=m()(t,2),n=a[0],i=a[1],c=new n({minScale:r&&r.min,maxScale:r&&r.max}),s.map.add(c),b(c),i.whenTrue(s,"stationary",(function(){var e=s.scale<r.min&&s.scale>r.max;g(e)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=f()(l.a.mark((function e(a){var n,r,i,s,u,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/symbols/CIMSymbol","esri/Graphic","esri/geometry/Point"]);case 3:n=e.sent,r=m()(n,3),i=r[0],s=r[1],u=r[2],f=a.map((function(e){var a=e.geometry,n={confirmed:e.confirmed,death:e.deaths,"new-cases":e.newCases}[t],r=n.frame,o=n.path,l=new i({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,scaleSymbolsProportionally:!1,respectFrame:!1,size:c,frame:r,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[o]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:1,color:[161,13,34,255]}]}}]}]}}});return new s({geometry:new u({latitude:a.y,longitude:a.x}),symbol:l})})),p.addMany(f),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s&&x()}),[s]),Object(n.useEffect)((function(){p&&a&&(p.removeAll(),y&&E(a))}),[p,a,t]),Object(n.useEffect)((function(){a&&y&&!p.graphics.length&&E(a)}),[y]),null},y=function(e){var t=e.itemId,a=e.outFields,r=e.mapView,i=e.visibleScale,c=e.onStart,s=e.onSelect,u=Object(n.useState)(),d=m()(u,2),p=d[0],b=d[1],v=function(){var e=f()(l.a.mark((function e(){var a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/layers/FeatureLayer"]);case 3:a=e.sent,n=m()(a,1),r=n[0],c=new r({portalItem:{id:t},minScale:i&&i.min,maxScale:i&&i.max}),b(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=f()(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.scale<p.minScale&&r.scale>p.maxScale)){e.next=6;break}return c(),e.next=4,p.queryFeatures({where:"1=1",geometry:r.toMap(t),returnGeometry:!0,outFields:a||["*"]});case 4:n=e.sent,s(n.features&&n.features.length?n.features[0]:void 0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r&&v()}),[r]),Object(n.useEffect)((function(){p&&r&&r.on("click",(function(e){h(e)}))}),[p]),null},g={"webmap-id":"1bff921ddf7044c3b5ba34e8494a2073","us-states-feature-layer-item-id":"99fd67933e754a1181cc755146be21ca","us-counties-feature-layer-item-id":"7566e0221e5646f99ea249a197116605","static-files-host":"https://static.vannizhang.com/covid19/","covid19-data-us-states-json":"us-states-paths.json","covid19-data-us-counties-json":"us-counties-paths.json","us-counties-layer-visible-scale":{min:75e5,max:0},"us-states-layer-visible-scale":{min:73957190,max:7500001}},x="#A10D22",E="#E8E2D2",w="#EFEADB",O="#B1A483",j="#B2A584",S=[{label:"WEEKLY CASES",value:"new-cases"},{label:"CASES",value:"confirmed"},{label:"DEATHS",value:"death"}],k=function(e){var t=e.isMobile,a=e.activeTrend,n=e.activeTrendOnChange;return r.a.createElement("div",{style:{position:"absolute",top:"10px",right:"10px",left:t?"10px":"unset",maxWidth:"420px",boxShadow:"0 0 10px 2px #B1A483"}},r.a.createElement("div",{style:{backgroundColor:x,color:w,lineHeight:"20px",width:"100%",textAlign:"center"}},r.a.createElement("span",{className:"avenir-bold",style:{fontSize:"11px"}},"COVID-19 TRENDS PER 100,000 PEOPLE, SINCE FEBRUARY, UPDATED DAILY")),r.a.createElement("div",{style:{display:"flex",height:"60px",width:"100%",boxSizing:"border-box",backgroundColor:E}},S.map((function(e){var i=e.value,c=e.label;return r.a.createElement("div",{key:i,style:{width:t?"auto":"120px",flexGrow:t?1:0,height:"100%",color:x,backgroundColor:a===i?w:"transparent",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",borderBottom:"solid 4px ".concat(a===i?x:"transparent"),borderRight:"solid 1px #E0D8C1",cursor:"pointer"},onClick:n.bind(void 0,i)},r.a.createElement("span",{className:"avenir-bold",style:{fontSize:"12px"}},c))})),r.a.createElement("div",{style:{width:"60px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},r.a.createElement("svg",{viewBox:"0 0 24 24",height:"24",width:"24",fill:j},r.a.createElement("path",{d:"M12.5 7.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM13 18V9h-2v1h1v8h-1v1h3v-1zm9.8-5.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})))))},C=a(23),M=a.n(C),N=a(6),F=a(52),P=a.n(F);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){M()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T={top:15,right:20,bottom:30,left:40},A=function(e){var t=e.xDomain,a=e.yDomain,i=e.children,c=P()(),o=Object(n.useRef)(),s=Object(n.useRef)(),l=r.a.useState(),u=m()(l,2),f=u[0],d=u[1],p=r.a.useState(),b=m()(p,2),v=b[0],h=b[1],y=function(){h((function(e){return I(I({},e),{},{lastUpdateTime:new Date})}))};return Object(n.useEffect)((function(){!function(){var e=o.current,n=e.offsetWidth-T.left-T.right,r=e.offsetHeight-T.top-T.bottom;s.current={height:r,width:n},Object(N.i)(e).append("svg").attr("width","100%").attr("height",r+T.top+T.bottom).append("g").attr("transform","translate(".concat(T.left,", ").concat(T.top,")"));var i=Object(N.i)(e).select("svg"),c=i.node(),l=i.select("g").node(),u=Object(N.f)().paddingInner(.2).range([0,n]).domain(t),f=Object(N.g)().range([r,0]).domain(a).nice();d({svg:c,g:l,margin:T,dimension:s.current}),h({x:u,y:f})}()}),[]),Object(n.useEffect)((function(){v&&a&&(v.y.domain(a).nice(),y())}),[a]),r.a.useEffect((function(){!function(){var e=o.current;if(e&&f&&v){var t=v.x,a=e.offsetWidth-T.left-T.right;s.current.width=a,t.range([0,a]),y()}}()}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:o,style:{position:"relative",width:"100%",height:"100%"}}),r.a.Children.map(i,(function(e){return r.a.cloneElement(e,{svgContainerData:f,scales:v})})))},z=a(8),L=Object(N.j)("%b"),R=function(e){var t=e.svgContainerData,a=e.scales;return r.a.useEffect((function(){var e,n,r,i,c,o,s,l,u,f,d,m,p;t&&a&&(e=t.dimension,n=t.g,r=e.height,i=e.width,c=Object(N.i)(n),o=a.x.domain(),s=o[0].split("-").map((function(e){return+e})),l=new Date(s[0],s[1]-1,s[2]),u=o[o.length-1].split("-").map((function(e){return+e})),f=new Date(u[0],u[1]-1,u[2]),d=Object(N.h)().range([0,i]).domain([l,f]),m=Object(N.a)(d).tickFormat((function(e){return L(e)})),(p=c.selectAll(".x.axis")).size()?p.attr("transform","translate(0,"+r+")").call(m):c.append("g").attr("class","x axis").attr("transform","translate(0,"+r+")").call(m),function(){var e=t.g,n=t.dimension.width,r=a.y,i=Object(N.i)(e),c=Object(N.b)(r).ticks(3).tickSizeInner(-n).tickPadding(5).tickFormat((function(e){return z.numberFns.abbreviateNumber(+e,0)})),o=i.selectAll(".y.axis");o.size()?o.call(c):i.append("g").attr("class","y axis").call(c)}())}),[t,a]),null},W=a(18),_="bar-rect-group-".concat(Object(W.generate)()),B="bar-rect-".concat(Object(W.generate)()),U=function(e){var t=e.data,a=e.fillColor,n=e.svgContainerData,i=e.scales,c=r.a.useRef(),o=function(){var e=Object(N.i)(c.current).selectAll(".".concat(_));e.size()&&e.remove()};return r.a.useEffect((function(){var e;n&&(e=n.g,c.current=Object(N.i)(e).append("g").node())}),[n]),r.a.useEffect((function(){var e,r,s;n&&i&&t&&(e=n.dimension.height,r=i.x,s=i.y,o(),Object(N.i)(c.current).append("g").attr("class",_).selectAll(".".concat(B)).data(t).enter().append("rect").attr("class",B).style("fill",a).attr("x",(function(e){return r(e.x)})).attr("width",r.bandwidth()).attr("y",(function(e){return s(e.y)})).attr("height",(function(t){return e-s(t.y)})))}),[i,t]),null},G="line-".concat(Object(W.generate)()),V=function(e){var t=e.data,a=e.strokeColor,n=e.svgContainerData,i=e.scales,c=r.a.useRef(),o=function(){var e=Object(N.i)(c.current).selectAll(".".concat(G));e.size()&&e.remove().exit()};return r.a.useEffect((function(){var e;n&&(e=n.g,c.current=Object(N.i)(e).append("g").node())}),[n]),r.a.useEffect((function(){var e,r,s,l,u;n&&i&&t&&(e=Object(N.i)(c.current),r=i.x,s=i.y,l=r.bandwidth()/2,u=Object(N.c)().x((function(e){return r(e.x)+l})).y((function(e){return s(e.y)})),o(),e.append("path").data([t]).attr("class",G).attr("d",u).style("fill","none").style("stroke",a).style("stroke-width",2))}),[i,t]),null},H=function(e){var t=e.data,a=e.svgContainerData,i=e.scales,c=e.onHover,o=r.a.useRef(),s=r.a.useRef(),l=function(e){s.current=e,u(),c(e)},u=function(){var e=i.x,t=s.current,a=Object(N.i)(o.current).select(".".concat("vertical-ref-line")),n=t?e(t.attributes.dt)+e.bandwidth()/2:0,r=t?1:0;a.attr("x1",n).attr("x2",n).style("opacity",r)},f=function(e){for(var a=-1,n=i.x,r=0,c=t.length;r<c;r++){var o=n(t[r].attributes.dt),s=t[r+1]?r+1:r,l=n(t[s].attributes.dt);if(e>=o&&e<=l){a=Math.abs(e-o)<Math.abs(e-l)?r:s;break}}return t[a]};return Object(n.useEffect)((function(){a&&t.length&&function(){var e=a.g,t=a.dimension,n=t.height,r=t.width;o.current=Object(N.i)(e).append("g").node();var i=Object(N.i)(o.current);i.append("line").attr("class","vertical-ref-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",n).style("opacity",0).attr("stroke-width",.5).attr("stroke","rgba(255,255,255,.75)").style("fill","none"),i.append("rect").attr("width",r).attr("height",n).attr("fill","rgba(0,0,0,0)").on("mouseleave",(function(){l(null)})).on("mousemove",(function(){var e=Object(N.e)(this)[0];l(f(e))}))}()}),[a,t]),Object(n.useEffect)((function(){if(a&&i){var e=a.dimension.width;Object(N.i)(o.current).select("rect").attr("width",e)}}),[i]),null},q=function(e){var t,a,i,c,o,s,l,u,f,d,p=e.svgContainerData,b=e.scales,v=e.data,h=r.a.useRef(),y=r.a.useState({top:0,left:0}),g=m()(y,2),x=g[0],E=g[1];return Object(n.useEffect)((function(){!function(){var e=h.current;if(e){var t=p.dimension,a=p.margin,n=t.width,r=b.x,i=(b.y,e.offsetWidth),c=-(e.offsetHeight/2-a.top),o=r(v.attributes.dt)+a.left,s=o+i/2>=n+a.left?o-i:o-i/2;s=s>=a.left?s:a.left,E({top:c,left:s})}}()}),[v]),v?(t=x.top,a=x.left,i=v.attributes,c=i.dt,o=i.Confirmed,s=i.Deaths,l=i.NewCases,i.Population,u=z.numberFns.numberWithCommas(l),f=z.numberFns.numberWithCommas(o),d=z.numberFns.numberWithCommas(s),r.a.createElement("div",{ref:h,style:{position:"absolute",left:"".concat(a,"px"),top:"".concat(t,"px"),padding:"7px 10px",background:w,color:"#fff",pointerEvents:"none",boxSizing:"border-box",boxShadow:"0 0 10px 2px ".concat(O)}},r.a.createElement("div",{className:"font-size--3 avenir-demi"},r.a.createElement("span",{className:"text-theme-color-khaki"},c)),r.a.createElement("div",{className:"font-size--2 avenir-bold"},r.a.createElement("div",null,r.a.createElement("span",{className:"text-theme-color-khaki"},"new cases: ",r.a.createElement("span",{className:"text-theme-color-red"},u))),r.a.createElement("div",null,r.a.createElement("span",{className:"text-theme-color-khaki"},"cumulative cases: ",r.a.createElement("span",{className:"text-theme-color-red"},f))),r.a.createElement("div",null,r.a.createElement("span",{className:"text-theme-color-khaki"},"cumulative deaths: ",r.a.createElement("span",{className:"text-theme-color-red"},d)))))):null},J={"new-cases":"NewCases",death:"Deaths",confirmed:"Confirmed"},Y=function(e){var t,a=e.activeTrend,i=e.data,c=J[a],o=Object(n.useState)(!1),s=m()(o,2),l=s[0],u=(s[1],Object(n.useState)()),f=m()(u,2),d=f[0],p=f[1],b=function(){if(!i||!i.length||"new-cases"!==a)return[];for(var e=[],t=i.length-1;t>0;t--){var n=i[t],r=n.attributes.dt,o=0,s=t-6>=0?t-6:0,u=t+1,f=i.slice(s,u);f.forEach((function(e){return o+=e.attributes[c]}));var d=o/f.length;l&&(d=d/n.attributes.Population*1e5),d=(d=Math.round(d))<0?0:d,e.push({x:r,y:d})}return e};return r.a.createElement("div",{style:{width:"100%",height:"170px",backgroundColor:w}},i&&i.length?r.a.createElement(A,{xDomain:i.map((function(e){return e.attributes.dt})),yDomain:(t=i.map((function(e){return l?Math.round(e.attributes[c]/e.attributes.Population*1e5):e.attributes[c]})),[0,Object(N.d)(t)||1])},r.a.createElement(R,null),r.a.createElement(U,{fillColor:j,data:i&&i.length?i.map((function(e){var t=l?Math.round(e.attributes[c]/e.attributes.Population*1e5):e.attributes[c];return{x:e.attributes.dt,y:t}})):[]}),r.a.createElement(V,{strokeColor:x,data:b()}),r.a.createElement(q,{data:d}),r.a.createElement(H,{data:i,onHover:p})):null)},Q=function(e){var t=e.showLoadingIndicator,a=e.children;return r.a.createElement("div",{style:{position:"absolute",left:"15px",right:"15px",bottom:"25px",boxSizing:"border-box",boxShadow:"0 0 10px 2px ".concat(O),backgroundColor:w}},t?r.a.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"225px"}},r.a.createElement("div",{className:"loader is-active"},r.a.createElement("div",{className:"loader-bars"}))):a)},K=a(145),X=a(144),Z=a(146);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){M()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var te=function(e){var t=e.locationName,a=e.data,n=e.isMobile,i=void 0!==n&&n,c=e.closeBtnOnClick;return r.a.createElement("div",{style:{position:"relative",width:"100%",padding:".4rem 1.35rem",display:i?"block":"flex",alignItems:"center",boxSizing:"border-box",backgroundColor:E}},r.a.createElement("div",{style:{color:x,textTransform:"uppercase",maxWidth:i?"320px":"auto"}},r.a.createElement("span",{className:"avenir-bold font-size-2"},t)),r.a.createElement("div",{style:{flexGrow:1}},function(){if(!a||!a.length)return null;var e=a[a.length-7],t=a[a.length-1],n=z.numberFns.numberWithCommas(t.attributes.Confirmed),c=z.numberFns.numberWithCommas(t.attributes.Deaths),o=z.numberFns.numberWithCommas(t.attributes.Confirmed-e.attributes.Confirmed),s=z.numberFns.numberWithCommas(t.attributes.Deaths-e.attributes.Deaths),l=z.numberFns.numberWithCommas(t.attributes.Population),u={padding:i?"0":"0 .65rem",borderRight:i?"none":"solid 1px rgba(178, 165, 132, .5)",display:i?"block":"flex",alignItems:"center"};return r.a.createElement("div",{className:"font-size--2 avenir-bold text-theme-color-khaki",style:{display:i?"block":"flex",alignItems:"strech",padding:"0 ".concat(i?"0":"1rem")}},r.a.createElement("div",{style:ee(ee({},u),{},{display:"block"})},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},"Biggest Weekly Jump")," ",i?null:r.a.createElement("br",null)," ",function(){for(var e=a[0],t=Number.NEGATIVE_INFINITY,n=Object(K.a)(a[0].attributes.dt,"yyyy-MM-dd",new Date),r=Object(X.a)(n),i=0,c=a.length;i<c;i++){var o=i%7+r;if(1===(o=o>7?o-7:o)){var s=a[i].attributes.Confirmed-(i-6>=0?a[i-6]:a[0]).attributes.Confirmed;s>t&&(t=s,e=a[i])}}var l=Object(K.a)(e.attributes.dt,"yyyy-MM-dd",new Date);return Object(Z.a)(l,"MMMM dd, yyyy")}())),r.a.createElement("div",{style:u},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},"Population")," ",l)),r.a.createElement("div",{style:u},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},o)," new cases and ",r.a.createElement("span",{className:"text-theme-color-red"},s)," deaths this week")),r.a.createElement("div",{style:ee(ee({},u),{},{borderRight:"none"})},r.a.createElement("span",null,r.a.createElement("span",{className:"text-theme-color-red"},n)," cumulative cases and ",r.a.createElement("span",{className:"text-theme-color-red"},c)," deaths")))}()),r.a.createElement("div",{style:ee({cursor:"pointer"},i?{position:"absolute",top:".5rem",right:".5rem"}:null),onClick:c},r.a.createElement("svg",{viewBox:"0 0 32 32",height:"32",width:"32",fill:j},r.a.createElement("path",{d:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"}),r.a.createElement("path",{fill:"none",d:"M0 0h32v32H0z"}))))},ae=function(e){var t=e.queryResult,a=e.mapView,r=Object(n.useState)(),i=m()(r,2),c=i[0],s=i[1],u=function(){var e=f()(l.a.mark((function e(){var t,n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/layers/GraphicsLayer"]);case 3:t=e.sent,n=m()(t,1),r=n[0],i=new r,a.map.add(i),s(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=f()(l.a.mark((function e(){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.loadModules)(["esri/symbols/SimpleFillSymbol"]);case 2:a=e.sent,n=m()(a,1),r=n[0],t.symbol=new r({color:[0,0,0,0],outline:{color:"rgba(178,165,132,.7)",width:1}}),c.add(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a&&u()}),[a]),Object(n.useEffect)((function(){c&&(c.removeAll(),t&&d())}),[t]),null},ne={},re=function(){var e=f()(l.a.mark((function e(t){var a,n,r,i,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.countyFIPS,n=t.stateName,!ne[r=a||n]){e.next=4;break}return e.abrupt("return",ne[r]);case 4:return i="".concat("https://services9.arcgis.com/6Hv9AANartyT7fJW/ArcGIS/rest/services/USCounties_cases_V1/FeatureServer/1","/query"),c=a?{f:"json",where:"FIPS='".concat(a,"'"),outFields:"dt,Confirmed,Deaths,NewCases,Population",orderByFields:"dt"}:{f:"json",where:"ST_Name='".concat(n,"'"),outFields:"*",orderByFields:"dt",groupByFieldsForStatistics:"ST_Name,dt",outStatistics:JSON.stringify([{statisticType:"sum",onStatisticField:"Confirmed",outStatisticFieldName:"Confirmed"},{statisticType:"sum",onStatisticField:"Deaths",outStatisticFieldName:"Deaths"},{statisticType:"sum",onStatisticField:"NewCases",outStatisticFieldName:"NewCases"},{statisticType:"sum",onStatisticField:"Population",outStatisticFieldName:"Population"}])},e.prev=6,e.next=9,b.a.get(i,{params:new URLSearchParams(c)});case 9:if(o=e.sent,!(s=o.data)||!s.features){e.next=14;break}return ne[r]=s.features,e.abrupt("return",s.features);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(n.useState)(function(){var e=z.urlFns.parseQuery();if(!e["@"])return null;var t=e["@"].split(",").map((function(e){return+e})),a=m()(t,3);return{lon:a[0],lat:a[1],zoom:a[2]}}()),t=m()(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){if(a){var e=a.lon,t=a.lat,n=a.zoom;z.urlFns.updateQueryParam({key:"@",value:"".concat(e,",").concat(t,",").concat(n)})}}),[a]),{locationFromURL:a,saveLocationInURL:r}},ce=z.miscFns.isMobileDevice(),oe=z.urlFns.parseQuery().trend,se=function(){var e=ie(),t=e.locationFromURL,a=e.saveLocationInURL,i=Object(n.useState)(oe||"new-cases"),c=m()(i,2),o=c[0],s=c[1],u=Object(n.useState)(),d=m()(u,2),p=d[0],x=d[1],E=Object(n.useState)(),w=m()(E,2),O=w[0],j=w[1],S=Object(n.useState)(),C=m()(S,2),M=C[0],N=C[1],F=Object(n.useState)(),P=m()(F,2),D=P[0],I=P[1],T=Object(n.useState)(!1),A=m()(T,2),z=A[0],L=A[1],R=function(){var e=f()(l.a.mark((function e(){var t,a,n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(t=g["static-files-host"])+g["covid19-data-us-counties-json"],n=t+g["covid19-data-us-states-json"],e.next=6,b.a.get(n);case 6:return r=e.sent,j(r.data),e.next=10,b.a.get(a);case 10:i=e.sent,x(i.data),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=f()(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return U(),e.abrupt("return",!1);case 3:return I({graphic:t,locationName:"".concat(t.attributes.NAME," CO, ").concat(t.attributes.STATE_NAME)}),e.next=6,re({countyFIPS:t.attributes.FIPS});case 6:a=e.sent,N(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=f()(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return U(),e.abrupt("return",!1);case 3:return a=t.attributes.STATE_NAME,I({graphic:t,locationName:t.attributes.STATE_NAME}),e.next=7,re({stateName:a});case 7:n=e.sent,N(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){N(void 0),L(!0)},U=function(){L(!1),N(void 0),I(void 0)};return Object(n.useEffect)((function(){R()}),[]),Object(n.useEffect)((function(){M&&L(!1)}),[M]),r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{webmapId:g["webmap-id"],initialMapCenterLocation:t,onStationary:a},r.a.createElement(ae,{queryResult:D?D.graphic:void 0}),r.a.createElement(h,{key:"US-Counties",features:p,activeTrend:o,size:20,visibleScale:g["us-counties-layer-visible-scale"]}),r.a.createElement(h,{key:"US-States",features:O,activeTrend:o,size:24,visibleScale:g["us-states-layer-visible-scale"]}),r.a.createElement(y,{key:"query-4-US-Counties",itemId:g["us-counties-feature-layer-item-id"],outFields:["FIPS","NAME","STATE_NAME"],visibleScale:g["us-counties-layer-visible-scale"],onStart:B,onSelect:W}),r.a.createElement(y,{key:"query-4-US-States",itemId:g["us-states-feature-layer-item-id"],outFields:["STATE_NAME"],visibleScale:g["us-states-layer-visible-scale"],onStart:B,onSelect:_})),r.a.createElement(k,{isMobile:ce,activeTrend:o,activeTrendOnChange:s}),M||z?r.a.createElement(Q,{showLoadingIndicator:z},r.a.createElement(te,{locationName:D?D.locationName:void 0,data:M,isMobile:ce,closeBtnOnClick:U}),r.a.createElement(Y,{activeTrend:o,data:M})):null)};Object(o.setDefaultOptions)({url:"https://js.arcgis.com/next/"}),c.a.render(r.a.createElement(se,null),document.getElementById("root"))}});
//# sourceMappingURL=main.5dfe919da23026637298.js.map