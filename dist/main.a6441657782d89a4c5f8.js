!function(e){function t(t){for(var r,i,o=t[0],s=t[1],u=t[2],f=0,p=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);p.length;)p.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=s;c.push([128,1]),n()}({128:function(e,t,n){"use strict";n.r(t);n(86);var r=n(0),a=n.n(r),c=n(36),i=n.n(c),o=n(6),s=n(1),u=n.n(s),l=n(4),f=n.n(l),p=n(3),d=n.n(p),m=n(9),b=n.n(m),h=function(e){var t=e.webmapId,n=e.children,c=a.a.useRef(),i=a.a.useState(null),s=d()(i,2),l=s[0],p=s[1],m=function(){var e=f()(u.a.mark((function e(){var n,r,a,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/views/MapView","esri/WebMap"]);case 3:n=e.sent,r=d()(n,2),a=r[0],i=r[1],(s=new a({container:c.current,map:new i({portalItem:{id:t}})})).when((function(){p(s)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Object(o.loadCss)(),m()}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:c}),a.a.Children.map(n,(function(e){return a.a.cloneElement(e,{mapView:l})})))};function v(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw c}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.activeTrendData,n=e.features,a=e.visibleScale,c=e.size,i=void 0===c?20:c,s=e.mapView,l=Object(r.useState)(),p=d()(l,2),m=p[0],b=p[1],h=function(){var e=f()(u.a.mark((function e(){var t,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/layers/GraphicsLayer"]);case 3:t=e.sent,n=d()(t,1),r=n[0],c=new r({minScale:a&&a.min,maxScale:a&&a.max}),s.map.add(c),b(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=f()(u.a.mark((function e(){var r,a,c,s,l,f,p,b,h,y,g,x,w,S,O,E,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/symbols/CIMSymbol","esri/Graphic","esri/geometry/Point"]);case 3:r=e.sent,a=d()(r,3),c=a[0],s=a[1],l=a[2],m.removeAll(),f=v(n);try{for(f.s();!(p=f.n()).done;)b=p.value,h=b.geometry,y=b.pathConfirmed,g=b.pathDeaths,x=b.pathNewCases,S=(w={confirmed:y,death:g,"new-cases":x}[t]).frame,O=w.path,E=new c({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,scaleSymbolsProportionally:!1,respectFrame:!1,size:i,frame:S,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[O]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:1,color:[161,13,34,255]}]}}]}]}}}),j=new s({geometry:new l({latitude:h.y,longitude:h.x}),symbol:E}),m.add(j)}catch(e){f.e(e)}finally{f.f()}e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){s&&h()}),[s]),Object(r.useEffect)((function(){m&&n&&y()}),[m,n,t]),null},x=function(e){var t=e.itemId,n=(e.outFields,e.mapView),a=e.visibleScale,c=e.onSelect,i=Object(r.useState)(),s=d()(i,2),l=s[0],p=s[1],m=function(){var e=f()(u.a.mark((function e(){var n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.loadModules)(["esri/layers/FeatureLayer"]);case 3:n=e.sent,r=d()(n,1),c=r[0],i=new c({portalItem:{id:t},minScale:a&&a.min,maxScale:a&&a.max}),p(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=f()(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.scale<l.minScale&&n.scale>l.maxScale)){e.next=5;break}return e.next=3,l.queryFeatures({where:"1=1",geometry:n.toMap(t),returnGeometry:!0,outFields:["*"]});case 3:(r=e.sent).features&&r.features.length&&c(r.features[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&m()}),[n]),Object(r.useEffect)((function(){l&&n&&n.on("click",(function(e){b(e)}))}),[l]),null},w={"webmap-id":"1bff921ddf7044c3b5ba34e8494a2073","covid19-data-us-states-url":"https://covid19.vannizhang.com/us-states-paths.json","covid19-data-us-counties-url":"https://covid19.vannizhang.com/us-counties-paths.json","us-counties-layer-visible-scale":{min:75e5,max:0},"us-states-layer-visible-scale":{min:73957190,max:7500001}},S="#A10D22",O="#E8E2D2",E="#EFEADB",j="#B1A483",C="#B2A584",k=[{label:"WEEKLY CASES",value:"new-cases"},{label:"CASES",value:"confirmed"},{label:"DEATHS",value:"death"}],D=function(e){var t=e.activeTrendData,n=e.trendDataOnChange;return a.a.createElement("div",{style:{position:"absolute",top:"10px",right:"10px",boxShadow:"0 0 10px 2px #B1A483"}},a.a.createElement("div",{style:{backgroundColor:S,color:E,height:"20px",lineHeight:"20px",width:"100%",textAlign:"center"}},a.a.createElement("span",{className:"avenir-bold",style:{fontSize:"0.785rem"}},"CORONAVIRUS TRENDS PER 100,000 PEOPLE, SINCE FEBRUARY, UPDATED DAILY")),a.a.createElement("div",{style:{display:"flex",height:"60px",width:"100%",boxSizing:"border-box",backgroundColor:O}},k.map((function(e){var r=e.value,c=e.label;return a.a.createElement("div",{key:r,style:{width:"150px",height:"100%",color:S,backgroundColor:t===r?E:"transparent",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",borderBottom:"solid 4px ".concat(t===r?S:"transparent"),borderRight:"solid 1px #E0D8C1",cursor:"pointer"},onClick:n.bind(void 0,r)},a.a.createElement("span",{className:"avenir-bold"},c))})),a.a.createElement("div",{style:{width:"60px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},a.a.createElement("svg",{viewBox:"0 0 24 24",height:"24",width:"24",fill:C},a.a.createElement("path",{d:"M12.5 7.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM13 18V9h-2v1h1v8h-1v1h3v-1zm9.8-5.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"}),a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})))))},A=n(37),F=n.n(A),P=n(2),M=n(38),I=n.n(M);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={top:5,right:20,bottom:30,left:40},R=function(e){var t=e.xDomain,n=e.yDomain,c=e.children,i=I()(),o=Object(r.useRef)(),s=Object(r.useRef)(),u=a.a.useState(),l=d()(u,2),f=l[0],p=l[1],m=a.a.useState(),b=d()(m,2),h=b[0],v=b[1],y=function(){v((function(e){return T(T({},e),{},{lastUpdateTime:new Date})}))};return Object(r.useEffect)((function(){!function(){var e=o.current,r=e.offsetWidth-z.left-z.right,a=e.offsetHeight-z.top-z.bottom;s.current={height:a,width:r},Object(P.h)(e).append("svg").attr("width","100%").attr("height",a+z.top+z.bottom).append("g").attr("transform","translate(".concat(z.left,", ").concat(z.top,")"));var c=Object(P.h)(e).select("svg"),i=c.node(),u=c.select("g").node(),l=Object(P.e)().paddingInner(.2).range([0,r]).domain(t),f=Object(P.f)().range([a,0]).domain(n).nice();p({svg:i,g:u,margin:z,dimension:s.current}),v({x:l,y:f})}()}),[]),Object(r.useEffect)((function(){h&&n&&(h.y.domain(n).nice(),y())}),[n]),a.a.useEffect((function(){!function(){var e=o.current;if(e&&f&&h){var t=h.x,n=e.offsetWidth-z.left-z.right;s.current.width=n,t.range([0,n]),y()}}()}),[i]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:o,style:{position:"relative",width:"100%",height:"100%"}}),a.a.Children.map(c,(function(e){return a.a.cloneElement(e,{svgContainerData:f,scales:h})})))},B=n(15),L=Object(P.i)("%b"),_=function(e){var t=e.svgContainerData,n=e.scales;return a.a.useEffect((function(){var e,r,a,c,i,o,s,u,l,f,p,d,m;t&&n&&(e=t.dimension,r=t.g,a=e.height,c=e.width,i=Object(P.h)(r),o=n.x.domain(),s=o[0].split("-").map((function(e){return+e})),u=new Date(s[0],s[1]-1,s[2]),l=o[o.length-1].split("-").map((function(e){return+e})),f=new Date(l[0],l[1]-1,l[2]),p=Object(P.g)().range([0,c]).domain([u,f]),d=Object(P.a)(p).tickFormat((function(e){return L(e)})),(m=i.selectAll(".x.axis")).size()?m.attr("transform","translate(0,"+a+")").call(d):i.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")").call(d),function(){var e=t.g,r=t.dimension.width,a=n.y,c=Object(P.h)(e),i=Object(P.b)(a).ticks(5).tickSizeInner(-r).tickPadding(5).tickFormat((function(e){return B.numberFns.abbreviateNumber(+e,0)})),o=c.selectAll(".y.axis");o.size()?o.call(i):c.append("g").attr("class","y axis").call(i)}())}),[t,n]),null},U=n(10),V="bar-rect-group-".concat(Object(U.generate)()),G="bar-rect-".concat(Object(U.generate)()),H=function(e){var t=e.data,n=e.fillColor,r=e.svgContainerData,c=e.scales,i=a.a.useRef(),o=function(){var e=Object(P.h)(i.current).selectAll(".".concat(V));e.size()&&e.remove()};return a.a.useEffect((function(){var e;r&&(e=r.g,i.current=Object(P.h)(e).append("g").node())}),[r]),a.a.useEffect((function(){var e,a,s;r&&c&&t&&(e=r.dimension.height,a=c.x,s=c.y,o(),Object(P.h)(i.current).append("g").attr("class",V).selectAll(".".concat(G)).data(t).enter().append("rect").attr("class",G).style("fill",n).attr("x",(function(e){return a(e.x)})).attr("width",a.bandwidth()).attr("y",(function(e){return s(e.y)})).attr("height",(function(t){return e-s(t.y)})))}),[c,t]),null},W="line-".concat(Object(U.generate)()),q=function(e){var t=e.data,n=e.strokeColor,r=e.svgContainerData,c=e.scales,i=a.a.useRef(),o=function(){var e=Object(P.h)(i.current).selectAll(".".concat(W));e.size()&&e.remove().exit()};return a.a.useEffect((function(){var e;r&&(e=r.g,i.current=Object(P.h)(e).append("g").node())}),[r]),a.a.useEffect((function(){var e,a,s,u,l;r&&c&&t&&(e=Object(P.h)(i.current),a=c.x,s=c.y,u=a.bandwidth()/2,l=Object(P.c)().x((function(e){return a(e.x)+u})).y((function(e){return s(e.y)})),o(),e.append("path").data([t]).attr("class",W).attr("d",l).style("fill","none").style("stroke",n).style("stroke-width",2))}),[c,t]),null},J={"new-cases":"NewCases",death:"Deaths",confirmed:"Confirmed"},Y=function(e){var t,n=e.activeTrend,c=e.data,i=J[n],o=Object(r.useState)(!0),s=d()(o,2),u=s[0];s[1];return c&&c.length?a.a.createElement("div",{style:{width:"100%",height:"170px",backgroundColor:E}},a.a.createElement(R,{xDomain:c.map((function(e){return e.attributes.dt})),yDomain:(t=c.map((function(e){return u?Math.round(e.attributes[i]/e.attributes.Population*1e5):e.attributes[i]})),[0,Object(P.d)(t)])},a.a.createElement(_,null),a.a.createElement(H,{fillColor:"#c9c2ad",data:c&&c.length?c.map((function(e){var t=u?Math.round(e.attributes[i]/e.attributes.Population*1e5):e.attributes[i];return{x:e.attributes.dt,y:t}})):[]}),a.a.createElement(q,{strokeColor:S,data:function(){if(!c||!c.length||"new-cases"!==n)return[];for(var e=[],t=c.length-1;t>0;t--){var r=c[t],a=r.attributes.dt,o=0,s=t-6>=0?t-6:0,l=t+1,f=c.slice(s,l);f.forEach((function(e){return o+=e.attributes[i]}));var p=o/f.length;u&&(p=p/r.attributes.Population*1e5),p=Math.round(p),e.push({x:a,y:p})}return e}()}))):null},K=function(e){var t=e.children;return a.a.createElement("div",{style:{position:"absolute",left:"15px",right:"15px",bottom:"25px",boxSizing:"border-box",boxShadow:"0 0 10px 2px ".concat(j),backgroundColor:E}},t)},Q=function(e){var t=e.locationName,n=e.closeBtnOnClick;return a.a.createElement("div",{style:{width:"100%",padding:".5rem 1.35rem",display:"flex",alignItems:"center",boxSizing:"border-box"}},a.a.createElement("div",{style:{color:S,textTransform:"uppercase"}},a.a.createElement("span",{className:"avenir-bold font-size-2"},t)),a.a.createElement("div",{style:{flexGrow:1}}),a.a.createElement("div",{style:{cursor:"pointer"},onClick:n},a.a.createElement("svg",{viewBox:"0 0 32 32",height:"32",width:"32",fill:C},a.a.createElement("path",{d:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"}),a.a.createElement("path",{fill:"none",d:"M0 0h32v32H0z"}))))},$=function(){var e=f()(u.a.mark((function e(t){var n,r,a,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.countyFIPS,r=t.stateName,a="".concat("https://services9.arcgis.com/6Hv9AANartyT7fJW/ArcGIS/rest/services/USCounties_cases_V1/FeatureServer/1","/query"),c=n?{f:"json",where:"FIPS='".concat(n,"'"),outFields:"dt,Confirmed,Deaths,NewCases,Population"}:{f:"json",where:"ST_Name='".concat(r,"'"),outFields:"*",orderByFields:"dt",groupByFieldsForStatistics:"ST_Name,dt",outStatistics:JSON.stringify([{statisticType:"sum",onStatisticField:"Confirmed",outStatisticFieldName:"Confirmed"},{statisticType:"sum",onStatisticField:"Deaths",outStatisticFieldName:"Deaths"},{statisticType:"sum",onStatisticField:"NewCases",outStatisticFieldName:"NewCases"},{statisticType:"sum",onStatisticField:"Population",outStatisticFieldName:"Population"}])},e.prev=3,e.next=6,b.a.get(a,{params:new URLSearchParams(c)});case 6:if(i=e.sent,!(o=i.data)||!o.features){e.next=10;break}return e.abrupt("return",o.features);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),X=B.urlFns.parseQuery().trend,Z=function(){var e=Object(r.useState)(X||"new-cases"),t=d()(e,2),n=t[0],c=t[1],i=Object(r.useState)(),o=d()(i,2),s=o[0],l=o[1],p=Object(r.useState)(),m=d()(p,2),v=m[0],y=m[1],S=Object(r.useState)(),O=d()(S,2),E=O[0],j=O[1],C=Object(r.useState)(),k=d()(C,2),A=k[0],F=k[1],P=function(){var e=f()(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get(w["covid19-data-us-counties-url"]);case 3:return t=e.sent,l(t.data),e.next=7,b.a.get(w["covid19-data-us-states-url"]);case 7:n=e.sent,y(n.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){P()}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(h,{webmapId:w["webmap-id"]},a.a.createElement(g,{key:"US-Counties",features:s,activeTrendData:n,size:18,visibleScale:w["us-counties-layer-visible-scale"]}),a.a.createElement(g,{key:"US-States",features:v,activeTrendData:n,size:24,visibleScale:w["us-states-layer-visible-scale"]}),a.a.createElement(x,{key:"query-4-US-Counties",itemId:"7566e0221e5646f99ea249a197116605",outFields:["FIPS"],visibleScale:w["us-counties-layer-visible-scale"],onSelect:function(){var e=f()(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.attributes.NAME," CO, ").concat(t.attributes.STATE_NAME),F(n),e.next=4,$({countyFIPS:t.attributes.FIPS});case 4:r=e.sent,j(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),a.a.createElement(x,{key:"query-4-US-States",itemId:"99fd67933e754a1181cc755146be21ca",outFields:["STATE_NAME"],visibleScale:w["us-states-layer-visible-scale"],onSelect:function(){var e=f()(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.attributes.STATE_NAME,F(n),e.next=4,$({stateName:n});case 4:r=e.sent,j(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),a.a.createElement(D,{activeTrendData:n,trendDataOnChange:c}),E?a.a.createElement(K,null,a.a.createElement(Q,{locationName:A,closeBtnOnClick:j.bind(void 0,null)}),a.a.createElement(Y,{activeTrend:n,data:E})):null)};Object(o.setDefaultOptions)({url:"https://js.arcgis.com/next/"}),i.a.render(a.a.createElement(Z,null),document.getElementById("root"))},86:function(e,t,n){}});
//# sourceMappingURL=main.a6441657782d89a4c5f8.js.map